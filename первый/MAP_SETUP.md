# Настройка кастомной карты с неоновыми дорогами

## Быстрый старт (используйте встроенный стиль)

Я уже обновил код приложения. Просто запустите:

```powershell
npm run dev
```

Теперь карта использует оранжевый неоновый стиль для дорог!

---

## Docker вариант (для полного контроля)

Если хотите использовать собственный тайл-сервер через Docker:

### 1. Запустите TileServer GL

```powershell
docker-compose up -d
```

Это запустит тайл-сервер на http://localhost:8080

### 2. Откройте браузер

Перейдите на http://localhost:8080 - там увидите список доступных стилей, включая `neon-roads`.

### 3. Подключите к приложению

Обновите файл `src/styles/neon-roads-style.ts`, замените URL источника:

```typescript
sources: {
  'openmaptiles': {
    type: 'vector',
    url: 'http://localhost:8080/styles/neon-roads/tiles.json'
  }
}
```

---

## Настройка цветов дорог

Чтобы изменить оттенок неона, отредактируйте:

- **map-data/styles/neon-roads.json** (для Docker версии)
- **src/styles/neon-roads-style.ts** (для встроенной версии)

### Примеры цветов:

- `#ff8c00` - стандартный оранжевый
- `#ff00ff` - розовый неон
- `#00ffff` - синий неон (киберпанк)
- `#00ff00` - зеленый неон (Матрица)
- `#ff0000` - красный неон

### Параметры свечения:

```json
{
  "line-color": "#ff8c00",     // Цвет линии
  "line-width": 12,             // Толщина
  "line-blur": 8,               // Размытие (эффект свечения)
  "line-opacity": 0.6           // Прозрачность
}
```

---

## Использование своих городов

### Вариант 1: OpenStreetMap (бесплатно)

Используется по умолчанию. Покрывает весь мир.

### Вариант 2: MapTiler (требует ключ API)

1. Зарегистрируйтесь на https://www.maptiler.com/ (бесплатно до 100k загрузок/месяц)
2. Получите API ключ
3. Замените в `map-data/styles/neon-roads.json`:

```json
"url": "https://api.maptiler.com/tiles/v3/tiles.json?key=ВАШ_КЛЮЧ"
```

### Вариант 3: Скачать данные конкретного города

Для лучшей производительности скачайте только нужный регион:

1. Зайдите на https://download.geofabrik.de/
2. Скачайте `.mbtiles` для вашего региона (например, Russia)
3. Положите файл в папку `map-data/`
4. Обновите `config.json`:

```json
"data": {
  "russia": {
    "mbtiles": "russia.mbtiles"
  }
}
```

---

## Проверка

После запуска dev-сервера (`npm run dev`), вы должны увидеть:

✅ Темный фон карты (#0a0a0f)  
✅ Оранжевое неоновое свечение на дорогах  
✅ Более яркие линии для крупных магистралей  
✅ Тусклое свечение для мелких улиц  

---

## Остановка Docker

```powershell
docker-compose down
```

---

## Устранение проблем

### Дороги не видны

- Увеличьте `line-opacity` с 0.6 до 0.9
- Увеличьте `line-width` 
- Проверьте, что источник тайлов работает

### Карта не загружается

- Проверьте консоль браузера (F12)
- Убедитесь, что Docker контейнер запущен: `docker ps`
- Проверьте доступность тайлов: откройте http://localhost:8080

### Низкая производительность

- Используйте `.mbtiles` файл для вашего региона вместо онлайн тайлов
- Уменьшите `line-blur` (меньше эффект, но быстрее)
